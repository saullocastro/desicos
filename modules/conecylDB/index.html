
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cone / Cylinder DataBase (desicos.conecylDB) &#8212; DESICOS 2.4.10 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Cone Ply Piece Optimization Tool (desicos.cppot)" href="../cppot/index.html" />
    <link rel="prev" title="Composite Module (desicos.composite)" href="../composite/index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <span class="target" id="module-desicos.conecylDB"><span id="module-conecyldb"></span></span><div class="section" id="cone-cylinder-database-desicos-conecyldb">
<h1>Cone / Cylinder DataBase (<a class="reference internal" href="#module-desicos.conecylDB" title="desicos.conecylDB"><code class="xref py py-mod docutils literal notranslate"><span class="pre">desicos.conecylDB</span></code></a>)<a class="headerlink" href="#cone-cylinder-database-desicos-conecyldb" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">desicos.conecylDB</span></code> module includes all the information about cones
and cylinders required to reproduce structures that were investigated
by many publications and in the context of DESICOS.</p>
<p>It also includes the tools necessary to work with the Imperfection
DataBase.  Unfortunately, the files composing this database cannot be made
available with the repository, but all the tools required to post process
an imperfection file had been made available.</p>
<span class="target" id="module-desicos.conecylDB.conecylDB"></span><div class="section" id="conecyl-data-base-desicos-conecyldb-conecyldb">
<h2>Conecyl Data-Base (<a class="reference internal" href="#module-desicos.conecylDB.conecylDB" title="desicos.conecylDB.conecylDB"><code class="xref py py-mod docutils literal notranslate"><span class="pre">desicos.conecylDB.conecylDB</span></code></a>)<a class="headerlink" href="#conecyl-data-base-desicos-conecyldb-conecyldb" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="desicos.conecylDB.conecylDB.delete">
<code class="sig-prename descclassname">desicos.conecylDB.conecylDB.</code><code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">which</span></em>, <em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/conecylDB.html#delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.conecylDB.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an entry to the dynamic database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>which</strong><span class="classifier">str</span></dt><dd><p>A string that can be: <code class="docutils literal notranslate"><span class="pre">ccs</span></code>, <code class="docutils literal notranslate"><span class="pre">laminaprops</span></code>, <code class="docutils literal notranslate"><span class="pre">allowables</span></code>.</p>
</dd>
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>The name of the new entry.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.conecylDB.fetch">
<code class="sig-prename descclassname">desicos.conecylDB.conecylDB.</code><code class="sig-name descname">fetch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">which</span></em>, <em class="sig-param"><span class="n">local_only</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/conecylDB.html#fetch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.conecylDB.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches a dictionary from the database</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>which</strong><span class="classifier">str</span></dt><dd><p>A string that can be: <code class="docutils literal notranslate"><span class="pre">ccs</span></code>, <code class="docutils literal notranslate"><span class="pre">laminaprops</span></code>, <code class="docutils literal notranslate"><span class="pre">allowables</span></code>.</p>
</dd>
<dt><strong>local_only</strong><span class="classifier">bool, optional</span></dt><dd><p>If only the local data-base should be considered.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.conecylDB.save">
<code class="sig-prename descclassname">desicos.conecylDB.conecylDB.</code><code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">which</span></em>, <em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/conecylDB.html#save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.conecylDB.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save an entry to the dynamic database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>which</strong><span class="classifier">str</span></dt><dd><p>A string that can be: <code class="docutils literal notranslate"><span class="pre">ccs</span></code>, <code class="docutils literal notranslate"><span class="pre">laminaprops</span></code>, <code class="docutils literal notranslate"><span class="pre">allowables</span></code>.</p>
</dd>
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>The name of the new entry.</p>
</dd>
<dt><strong>value</strong><span class="classifier">object</span></dt><dd><p>The object that will be stored in the dictionary pointed by <code class="docutils literal notranslate"><span class="pre">which</span></code>
under the key given by <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.conecylDB.update_imps">
<code class="sig-prename descclassname">desicos.conecylDB.conecylDB.</code><code class="sig-name descname">update_imps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/conecylDB.html#update_imps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.conecylDB.update_imps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the updated imperfection definitions from the data-base</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>out</strong><span class="classifier">tuple</span></dt><dd><p>A tuple containing the updated dictionaries with useful data form
the data-base. In the description below <code class="docutils literal notranslate"><span class="pre">key</span></code> corresponds to a
<code class="docutils literal notranslate"><span class="pre">ccs</span></code> entry of the database:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">imps</span></code>: contains the full path of an imperfection file
corresponding to <code class="docutils literal notranslate"><span class="pre">key</span></code>, accessed doing <code class="docutils literal notranslate"><span class="pre">imp[key]['msi']</span></code> or
<code class="docutils literal notranslate"><span class="pre">imp[key]['ti']</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">imps_theta_z</span></code>: similar to <code class="docutils literal notranslate"><span class="pre">imps</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t_measured</span></code>: contains the measured shell thickness for a
correponding entry access doing <code class="docutils literal notranslate"><span class="pre">t_measured[key]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R_best_fit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">H_measured</span></code></p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-desicos.conecylDB.ccs"></span><div class="section" id="cone-cylinders-desicos-conecyldb-ccs">
<h2>Cone/Cylinders (<a class="reference internal" href="#module-desicos.conecylDB.ccs" title="desicos.conecylDB.ccs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">desicos.conecylDB.ccs</span></code></a>)<a class="headerlink" href="#cone-cylinders-desicos-conecyldb-ccs" title="Permalink to this headline">¶</a></h2>
<p>This static database stores all entries in the dictionary <code class="docutils literal notranslate"><span class="pre">ccs</span></code> which can be
imported as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">desicos.conecylDB.ccs</span> <span class="kn">import</span> <span class="n">ccs</span>
</pre></div>
</div>
<p>More entries can be added here if one wishes to update the static database.</p>
<p>The entries shown in the Plug-In for Abaqus are those with the corresponding
keys listed in <code class="docutils literal notranslate"><span class="pre">include_in_GUI</span></code>.</p>
</div>
<span class="target" id="module-desicos.conecylDB.laminaprops"></span><div class="section" id="lamina-elastic-properties-desicos-conecyldb-laminaprops">
<h2>Lamina Elastic Properties (<a class="reference internal" href="#module-desicos.conecylDB.laminaprops" title="desicos.conecylDB.laminaprops"><code class="xref py py-mod docutils literal notranslate"><span class="pre">desicos.conecylDB.laminaprops</span></code></a>)<a class="headerlink" href="#lamina-elastic-properties-desicos-conecyldb-laminaprops" title="Permalink to this headline">¶</a></h2>
<p>This static database stores all entries in the dictionary <code class="docutils literal notranslate"><span class="pre">laminaprops</span></code>
which can be imported as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">desicos.conecylDB.laminaprops</span> <span class="kn">import</span> <span class="n">laminaprops</span>
</pre></div>
</div>
<p>In the dictionary <code class="docutils literal notranslate"><span class="pre">laminaprops</span></code> each entry is stored as a tuple:</p>
<ul class="simple">
<li><p>orthotropic material: (<img class="math" src="../../_images/math/259bbb4a3e03a3054aa3873f3170d1180e50f508.png" alt="E_{11}"/>, <img class="math" src="../../_images/math/8d5adbe6b253ea4b7a3572e1f156dad1547ac2c0.png" alt="E_{22}"/>, <img class="math" src="../../_images/math/684f412c185658eeb3fee3c2e43230f19394a6ee.png" alt="\nu_{12}"/>, <img class="math" src="../../_images/math/515114f5af3234b6b54c502a48f5374d2d69fb11.png" alt="G_{12}"/>,
<img class="math" src="../../_images/math/5b50e1a3a1a641775eca3c2230975050551f86b2.png" alt="G_{13}"/>, <img class="math" src="../../_images/math/3d766a6fca26a825e427aa11664d35f5b4e3b995.png" alt="G_{23}"/>)</p></li>
<li><p>isotropic material: (<img class="math" src="../../_images/math/1815f600df7845409443aed470eac2d449e4ddb0.png" alt="E"/>, <img class="math" src="../../_images/math/1815f600df7845409443aed470eac2d449e4ddb0.png" alt="E"/>, <img class="math" src="../../_images/math/14eb89266154200b9c81dcfc3bd058638fa221bf.png" alt="\nu"/>)</p></li>
</ul>
<p>More entries can be added here if one wishes to update the static database.</p>
</div>
<span class="target" id="module-desicos.conecylDB.allowables"></span><div class="section" id="lamina-allowables-desicos-conecyldb-allowables">
<h2>Lamina Allowables (<a class="reference internal" href="#module-desicos.conecylDB.allowables" title="desicos.conecylDB.allowables"><code class="xref py py-mod docutils literal notranslate"><span class="pre">desicos.conecylDB.allowables</span></code></a>)<a class="headerlink" href="#lamina-allowables-desicos-conecyldb-allowables" title="Permalink to this headline">¶</a></h2>
<p>This static database stores all entries in the dictionary <code class="docutils literal notranslate"><span class="pre">allowables</span></code>
which can be imported as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">desicos.conecylDB.allowables</span> <span class="kn">import</span> <span class="n">allowables</span>
</pre></div>
</div>
<p>In the dictionary <code class="docutils literal notranslate"><span class="pre">allowables</span></code> each entry is stored as a tuple:</p>
<ul class="simple">
<li><p>(<img class="math" src="../../_images/math/b4ba9529b9ac98ae512f0ab2274a0556e279eb00.png" alt="{S_{11}}_T"/>, <img class="math" src="../../_images/math/190693ec34ff3b802dd5577bca7b1150cdcfcdfa.png" alt="{S_{11}}_C"/>, <img class="math" src="../../_images/math/cc657e36897d5a66977926794b8a0b5ef1e99c18.png" alt="{S_{22}}_T"/>, <img class="math" src="../../_images/math/474fee90032a6921f5ad93dec4dc1996d808e82d.png" alt="{S_{22}}_C"/>, <img class="math" src="../../_images/math/57da2273a8dd0bb9fd775b94809d5eb13ca4125e.png" alt="S_{12}"/>, <img class="math" src="../../_images/math/fbbf5df0ce829292143396e4310197aa3e46de24.png" alt="S_{13}"/>)</p></li>
</ul>
<p>where <img class="math" src="../../_images/math/4db5b6e16e06f929ce3f675c5e535d06ffb02ff7.png" alt="C"/> and <img class="math" src="../../_images/math/e8dea8254118f111b5fb20895b03528c17566f06.png" alt="T"/> stand for compression or tensile allowables. More
entries can be added here if one wishes to update the static database.</p>
</div>
<span class="target" id="module-desicos.conecylDB.fit_data"></span><div class="section" id="fitting-data-desicos-conecyldb-fit-data">
<h2>Fitting Data (<a class="reference internal" href="#module-desicos.conecylDB.fit_data" title="desicos.conecylDB.fit_data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">desicos.conecylDB.fit_data</span></code></a>)<a class="headerlink" href="#fitting-data-desicos-conecyldb-fit-data" title="Permalink to this headline">¶</a></h2>
<p>This module includes functions used to fit measured imperfection data.</p>
<dl class="py function">
<dt id="desicos.conecylDB.fit_data.best_fit_cone">
<code class="sig-prename descclassname">desicos.conecylDB.fit_data.</code><code class="sig-name descname">best_fit_cone</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">H</span></em>, <em class="sig-param"><span class="n">alphadeg</span></em>, <em class="sig-param"><span class="n">R_expected</span><span class="o">=</span><span class="default_value">10.0</span></em>, <em class="sig-param"><span class="n">save</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">errorRtol</span><span class="o">=</span><span class="default_value">1e-09</span></em>, <em class="sig-param"><span class="n">maxNumIter</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">sample_size</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/fit_data.html#best_fit_cone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.fit_data.best_fit_cone" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit a best cone for a given set of measured data</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>NOT IMPLEMENTED YET</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.fit_data.best_fit_cylinder">
<code class="sig-prename descclassname">desicos.conecylDB.fit_data.</code><code class="sig-name descname">best_fit_cylinder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">H</span></em>, <em class="sig-param"><span class="n">R_expected</span><span class="o">=</span><span class="default_value">10.0</span></em>, <em class="sig-param"><span class="n">save</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">errorRtol</span><span class="o">=</span><span class="default_value">1e-09</span></em>, <em class="sig-param"><span class="n">maxNumIter</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">sample_size</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/fit_data.html#best_fit_cylinder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.fit_data.best_fit_cylinder" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit a best cylinder for a given set of measured data</p>
<p>The coordinate transformation which must be performed in order to adjust
the raw data to the finite element coordinate system is illustrated below:</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../_images/coord_sys_trans.png"><img alt="../../_images/coord_sys_trans.png" src="../../_images/coord_sys_trans.png" style="width: 400px;" /></a>
</div>
<p>This transformation can be represented in matrix form as:</p>
<div class="math">
<p><img src="../../_images/math/34462534947cfcf3255534ba88541ab65d2f3b36.png" alt="[T] = \begin{bmatrix}
cos(\beta) &amp;  sin(\alpha)sin(\beta) &amp; -cos(\alpha)sin(\beta) &amp; \Delta x_0
\\
         0 &amp;            cos(\alpha) &amp;            sin(\alpha) &amp; \Delta y_0
\\
sin(\beta) &amp; -sin(\alpha)cos(\beta) &amp;  cos(\alpha)cos(\beta) &amp; \Delta z_0
\\
      \end{bmatrix}"/></p>
</div><p>Note that <strong>five</strong> variables are unknowns:</p>
<ul class="simple">
<li><p>the rotation angles <img class="math" src="../../_images/math/2f5aa019312e1bbc969deab8dca8b00f76025404.png" alt="\alpha"/> and <img class="math" src="../../_images/math/7138dad9ac96835665b17f5817eacfcaa9b834c9.png" alt="\beta"/></p></li>
<li><p>the three components of the translation <img class="math" src="../../_images/math/9467a6245cfbe0c4641fa6effcf68f910319f90d.png" alt="\Delta x_0"/>, <img class="math" src="../../_images/math/0f5dadf23bbc379327ff81449a7b2d0de2ed4e50.png" alt="\Delta y_0"/> and
<img class="math" src="../../_images/math/b503a0e6e3e4a2c149061a068ea5ecd040fe91a6.png" alt="\Delta z_0"/></p></li>
</ul>
<p>The five unknowns are calculated iteratively in a non-linear least-sqares
problem (solved with <code class="docutils literal notranslate"><span class="pre">scipy.optimize.leastsq</span></code>), where the measured data
is transformed to the reference coordinate system and there compared with
a reference cylinder in order to compute the residual error using:</p>
<div class="math">
<p><img src="../../_images/math/8653610bee93f89e98e37392ff6131b33e194ea1.png" alt="\begin{Bmatrix} x_{ref} \\ y_{ref} \\ z_{ref} \end{Bmatrix} =
[T]
\begin{Bmatrix} x_m \\ y_m \\ z_m \\ 1 \end{Bmatrix}
\\
Error = \sqrt{(\Delta r)^2 + (\Delta z)^2}"/></p>
</div><p>where:</p>
<ul>
<li><p><img class="math" src="../../_images/math/7adfabb495432f2e6b2dd12cc5f7c6280c0a0bf8.png" alt="x_m"/>, <img class="math" src="../../_images/math/637bb1483949584680cc4e38b892b4a28043e2cd.png" alt="y_m"/> and <img class="math" src="../../_images/math/4525c42aeaddb1909ef34678e840c25416f601e6.png" alt="z_m"/> are the data coordinates in the data coordinate
system</p></li>
<li><p><img class="math" src="../../_images/math/979b44c87a9137d62b3db0a4dc0fab467be2eaef.png" alt="x_{ref}"/> <img class="math" src="../../_images/math/979b44c87a9137d62b3db0a4dc0fab467be2eaef.png" alt="x_{ref}"/> are the data coordinates in the <a class="reference internal" href="../abaqus/index.html#figure-conecyl"><span class="std std-ref">reference
coordinate system</span></a></p></li>
<li><p><img class="math" src="../../_images/math/15512e47b5beaf35e54d5ff1c00419881cd68802.png" alt="\Delta r"/> and <img class="math" src="../../_images/math/f52e428a596299d136f6a197f954d730669c0253.png" alt="\Delta z"/> are defined as:</p>
<blockquote>
<div><div class="math">
<p><img src="../../_images/math/90afe5bd7330e69b06c02dac50a2654e60b28a4c.png" alt="\Delta r = R - \sqrt{x_{ref}^2 + y_{ref}^2}
\\
\Delta z = \begin{cases}
                -z_{ref}, &amp; \text{if } z_{ref} &lt; 0 \\
                       0, &amp; \text{if } 0 &lt;= z_{ref} &lt;= H \\
             z_{ref} - H, &amp; \text{if } z_{ref} &gt; H \\
           \end{cases}"/></p>
</div></div></blockquote>
</li>
</ul>
<p>Since the measured data may have an unknown radius <img class="math" src="../../_images/math/1ebe654cc7b8f2a0d8100aa5825cf2b9021adbbc.png" alt="R"/>, the solution of
these equations has to be performed iteratively with one additional
external loop in order to update <img class="math" src="../../_images/math/1ebe654cc7b8f2a0d8100aa5825cf2b9021adbbc.png" alt="R"/>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>path</strong><span class="classifier">str or np.ndarray</span></dt><dd><p>The path of the file containing the data. Can be a full path using
<code class="docutils literal notranslate"><span class="pre">r&quot;C:\Temp\inputfile.txt&quot;</span></code>, for example.
The input file must have 3 columns “<img class="math" src="../../_images/math/888f7c323ac0341871e867220ae2d76467d74d6e.png" alt="x"/> <img class="math" src="../../_images/math/1b5e577d6216dca3af7d87aa122a0b9b360d6cb3.png" alt="y"/> <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/>” expressed
in Cartesian coordinates.</p>
<p>This input can also be a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> object, with <img class="math" src="../../_images/math/888f7c323ac0341871e867220ae2d76467d74d6e.png" alt="x"/>, <img class="math" src="../../_images/math/1b5e577d6216dca3af7d87aa122a0b9b360d6cb3.png" alt="y"/>, <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/>
in each corresponding column.</p>
</dd>
<dt><strong>H</strong><span class="classifier">float</span></dt><dd><p>The nominal height of the cylinder.</p>
</dd>
<dt><strong>R_expected</strong><span class="classifier">float, optional</span></dt><dd><p>The nominal radius of the cylinder, used as a first guess to find
the best-fit radius (<code class="docutils literal notranslate"><span class="pre">R_best_fit</span></code>). Note that if not specified more
iterations may be required.</p>
</dd>
<dt><strong>save</strong><span class="classifier">bool, optional</span></dt><dd><p>Whether to save an <code class="docutils literal notranslate"><span class="pre">&quot;output_best_fit.txt&quot;</span></code> in the working directory.</p>
</dd>
<dt><strong>errorRtol</strong><span class="classifier">float, optional</span></dt><dd><p>The error tolerance for the best-fit radius to stop the iterations.</p>
</dd>
<dt><strong>maxNumIter</strong><span class="classifier">int, optional</span></dt><dd><p>The maximum number of iterations for the best-fit radius.</p>
</dd>
<dt><strong>sample_size</strong><span class="classifier">int, optional</span></dt><dd><p>If the input file containing the measured data is too big it may
be convenient to use only a sample of it in order to calculate the
best fit.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>out</strong><span class="classifier">dict</span></dt><dd><p>A Python dictionary with the entries:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">out['R_best_fit']</span></code><span class="classifier">float</span></dt><dd><p>The best-fit radius of the input sample.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">out['T']</span></code><span class="classifier">np.ndarray</span></dt><dd><p>The transformation matrix as a <img class="math" src="../../_images/math/2042304a95674f65e4398d87381a2b883ca751b7.png" alt="3 \times 4"/> 2-D array. This matrix
does the transformation: input_pts –&gt; output_pts.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">out['Tinv']</span></code><span class="classifier">np.ndarray</span></dt><dd><p>The inverse transformation matrix as a <img class="math" src="../../_images/math/2042304a95674f65e4398d87381a2b883ca751b7.png" alt="3 \times 4"/> 2-D array.
This matrix does the transformation: output_pts –&gt; input_pts.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">out['input_pts']</span></code><span class="classifier">np.ndarray</span></dt><dd><p>The input points in a <img class="math" src="../../_images/math/672c8744f5d749a2c5c5a0d09faa8b066f5d7eeb.png" alt="3 \times N"/> 2-D array.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">out['output_pts']</span></code><span class="classifier">np.ndarray</span></dt><dd><p>The transformed points in a <img class="math" src="../../_images/math/672c8744f5d749a2c5c5a0d09faa8b066f5d7eeb.png" alt="3 \times N"/> 2-D array.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<ol class="arabic simple">
<li><p>General usage</p></li>
</ol>
<p>For a given cylinder with expected radius and height of <code class="docutils literal notranslate"><span class="pre">R_expected</span></code> and
<code class="docutils literal notranslate"><span class="pre">H</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">desicos.conecylDB.fit_data</span> <span class="kn">import</span> <span class="n">best_fit_cylinder</span>

<span class="n">out</span> <span class="o">=</span> <span class="n">best_fit_cylinder</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">H</span><span class="o">=</span><span class="n">H</span><span class="p">,</span> <span class="n">R_expected</span><span class="o">=</span><span class="n">R_expected</span><span class="p">)</span>
<span class="n">R_best_fit</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="s1">&#39;R_best_fit&#39;</span><span class="p">]</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="s1">&#39;T&#39;</span><span class="p">]</span>
<span class="n">Tinv</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="s1">&#39;Tinv&#39;</span><span class="p">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Using the transformation matrices <code class="docutils literal notranslate"><span class="pre">T</span></code> and <code class="docutils literal notranslate"><span class="pre">Tinv</span></code></p></li>
</ol>
<p>For a given input data with <img class="math" src="../../_images/math/84038dd82cd8eb59190dea53114a91b450f8dbb6.png" alt="x, y, z"/> positions in each line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s1">&#39;input_file.txt&#39;</span><span class="p">,</span> <span class="n">unpack</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>the transformation could be obtained with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xnew</span><span class="p">,</span> <span class="n">ynew</span><span class="p">,</span> <span class="n">znew</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">x</span><span class="p">))))</span>
</pre></div>
</div>
<p>and the inverse transformation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">Tinv</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">xnew</span><span class="p">,</span> <span class="n">ynew</span><span class="p">,</span> <span class="n">znew</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">xnew</span><span class="p">))))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.fit_data.calc_c0">
<code class="sig-prename descclassname">desicos.conecylDB.fit_data.</code><code class="sig-name descname">calc_c0</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">m0</span><span class="o">=</span><span class="default_value">50</span></em>, <em class="sig-param"><span class="n">n0</span><span class="o">=</span><span class="default_value">50</span></em>, <em class="sig-param"><span class="n">funcnum</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">fem_meridian_bot2top</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">rotatedeg</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filter_m0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filter_n0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sample_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maxmem</span><span class="o">=</span><span class="default_value">8</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/fit_data.html#calc_c0"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.fit_data.calc_c0" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the coefficients that best fit the <img class="math" src="../../_images/math/73036b31511ada0e09ed38a1a5ad0c9f8a2a5e86.png" alt="w_0"/> imperfection</p>
<p>The measured data will be fit using one of the following functions,
selected using the <code class="docutils literal notranslate"><span class="pre">funcnum</span></code> parameter:</p>
<ol class="arabic simple">
<li><p>Half-Sine Function</p></li>
</ol>
<div class="math">
<p><img src="../../_images/math/2bd8cc1a399f64aa0444325b291da3ba127c06a3.png" alt="w_0 = \sum_{i=1}^{m_0}{ \sum_{j=0}^{n_0}{
         {c_0}_{ij}^a sin{b_z} sin{b_\theta}
        +{c_0}_{ij}^b sin{b_z} cos{b_\theta} }}"/></p>
</div><ol class="arabic simple" start="2">
<li><p>Half-Cosine Function (default)</p></li>
</ol>
<div class="math">
<p><img src="../../_images/math/23ebd13208ec76da7dddb06ef2f5f6903cb2e53f.png" alt="w_0 = \sum_{i=0}^{m_0}{ \sum_{j=0}^{n_0}{
        {c_0}_{ij}^a cos{b_z} sin{b_\theta}
        +{c_0}_{ij}^b cos{b_z} cos{b_\theta} }}"/></p>
</div><ol class="arabic simple" start="3">
<li><p>Complete Fourier Series</p></li>
</ol>
<div class="math">
<p><img src="../../_images/math/9b968f84e8d9785e335747b81bf5e82fe38ba06e.png" alt="w_0 = \sum_{i=0}^{m_0}{ \sum_{j=0}^{n_0}{
         {c_0}_{ij}^a sin{b_z} sin{b_\theta}
        +{c_0}_{ij}^b sin{b_z} cos{b_\theta}
        +{c_0}_{ij}^c cos{b_z} sin{b_\theta}
        +{c_0}_{ij}^d cos{b_z} cos{b_\theta} }}"/></p>
</div><p>where:</p>
<div class="math">
<p><img src="../../_images/math/669cada4bd575e405593c3ad5ab7db031fcb8875.png" alt="b_z = i \pi \frac z H_{points}

b_\theta = j \theta"/></p>
</div><p>where <img class="math" src="../../_images/math/07a74bd62f6ca2218e6f8cf6fd2fe9bc51ec8ccc.png" alt="H_{points}"/> represents the difference between the maximum and
the minimum <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/> values in the imperfection file.</p>
<p>The approximation can be written in matrix form as:</p>
<div class="math">
<p><img src="../../_images/math/1647bc665f0ae987f9a4c5098fe55254b39dccd9.png" alt="w_0 = [g] \{c_0\}"/></p>
</div><p>where <img class="math" src="../../_images/math/8ae4ed85fbb6054838a85f3d25f4c693621cbbf0.png" alt="[g]"/> carries the base functions and <img class="math" src="../../_images/math/df6798767ffb52d607df8cd8f97361da5e43af0d.png" alt="{c_0}"/> the respective
amplitudes. The solution consists on finding the best <img class="math" src="../../_images/math/df6798767ffb52d607df8cd8f97361da5e43af0d.png" alt="{c_0}"/> that
minimizes the least-square error between the measured imperfection pattern
and the <img class="math" src="../../_images/math/73036b31511ada0e09ed38a1a5ad0c9f8a2a5e86.png" alt="w_0"/> function.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>path</strong><span class="classifier">str or np.ndarray</span></dt><dd><p>The path of the file containing the data. Can be a full path using
<code class="docutils literal notranslate"><span class="pre">r&quot;C:\Temp\inputfile.txt&quot;</span></code>, for example.
The input file must have 3 columns “<img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/> <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/> <img class="math" src="../../_images/math/de3645446a888e17a70c677bce72bcbdfa20a886.png" alt="imp"/>” expressed
in Cartesian coordinates.</p>
<p>This input can also be a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> object, with
<img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/>, <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/>, <img class="math" src="../../_images/math/de3645446a888e17a70c677bce72bcbdfa20a886.png" alt="imp"/> in each corresponding column.</p>
</dd>
<dt><strong>m0</strong><span class="classifier">int</span></dt><dd><p>Number of terms along the meridian (<img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/>).</p>
</dd>
<dt><strong>n0</strong><span class="classifier">int</span></dt><dd><p>Number of terms along the circumference (<img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/>).</p>
</dd>
<dt><strong>funcnum</strong><span class="classifier">int, optional</span></dt><dd><p>As explained above, selects the base functions used for
the approximation.</p>
</dd>
<dt><strong>fem_meridian_bot2top</strong><span class="classifier">bool, optional</span></dt><dd><p>A boolean indicating if the finite element has the <img class="math" src="../../_images/math/888f7c323ac0341871e867220ae2d76467d74d6e.png" alt="x"/> axis starting
at the bottom or at the top.</p>
</dd>
<dt><strong>rotatedeg</strong><span class="classifier">float or None, optional</span></dt><dd><p>Rotation angle in degrees telling how much the imperfection pattern
should be rotated about the <img class="math" src="../../_images/math/cd5e7e15383e8582969c6a82e4e784bee1c7d1b7.png" alt="X_3"/> (or <img class="math" src="../../_images/math/95f028ab2b20b895fa12d986e0d9f40f7b6e52d3.png" alt="Z"/>) axis.</p>
</dd>
<dt><strong>filter_m0</strong><span class="classifier">list, optional</span></dt><dd><p>The values of <code class="docutils literal notranslate"><span class="pre">m0</span></code> that should be filtered (see <a class="reference internal" href="#desicos.conecylDB.fit_data.filter_c0" title="desicos.conecylDB.fit_data.filter_c0"><code class="xref py py-func docutils literal notranslate"><span class="pre">filter_c0()</span></code></a>).</p>
</dd>
<dt><strong>filter_n0</strong><span class="classifier">list, optional</span></dt><dd><p>The values of <code class="docutils literal notranslate"><span class="pre">n0</span></code> that should be filtered (see <a class="reference internal" href="#desicos.conecylDB.fit_data.filter_c0" title="desicos.conecylDB.fit_data.filter_c0"><code class="xref py py-func docutils literal notranslate"><span class="pre">filter_c0()</span></code></a>).</p>
</dd>
<dt><strong>sample_size</strong><span class="classifier">int or None, optional</span></dt><dd><p>An in  specifying how many points of the imperfection file should
be used. If <code class="docutils literal notranslate"><span class="pre">None</span></code> is used all points file will be used in the
computations.</p>
</dd>
<dt><strong>maxmem</strong><span class="classifier">int, optional</span></dt><dd><p>Maximum RAM memory in GB allowed to compute the base functions.
The <code class="docutils literal notranslate"><span class="pre">scipy.interpolate.lstsq</span></code> will go beyond this limit.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>out</strong><span class="classifier">np.ndarray</span></dt><dd><p>A 1-D array with the best-fit coefficients.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If a similar imperfection pattern is expected along the meridian and along
the circumference, the analyst can use an optimized relation between
<code class="docutils literal notranslate"><span class="pre">m0</span></code> and <code class="docutils literal notranslate"><span class="pre">n0</span></code> in order to achieve a higher accuracy for a given
computational cost, as proposed by Castro et al. (2014):</p>
<div class="math">
<p><img src="../../_images/math/2c38e6cab9e37ed4ff43a3209fae1d36a092d226.png" alt="n_0 = m_0 \frac{\pi(R_{bot}+R_{top})}{2H}"/></p>
</div></dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.fit_data.fa">
<code class="sig-prename descclassname">desicos.conecylDB.fit_data.</code><code class="sig-name descname">fa</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m0</span></em>, <em class="sig-param"><span class="n">n0</span></em>, <em class="sig-param"><span class="n">zs_norm</span></em>, <em class="sig-param"><span class="n">thetas</span></em>, <em class="sig-param"><span class="n">funcnum</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/fit_data.html#fa"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.fit_data.fa" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the matrix with the base functions for <img class="math" src="../../_images/math/73036b31511ada0e09ed38a1a5ad0c9f8a2a5e86.png" alt="w_0"/></p>
<p>The calculated matrix is directly used to calculate the <img class="math" src="../../_images/math/73036b31511ada0e09ed38a1a5ad0c9f8a2a5e86.png" alt="w_0"/> displacement
field, when the corresponding coefficients <img class="math" src="../../_images/math/0e737f293729c4135dbc78f453a7c82b3dc68dcd.png" alt="c_0"/> are known, through:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">fa</span><span class="p">(</span><span class="n">m0</span><span class="p">,</span> <span class="n">n0</span><span class="p">,</span> <span class="n">zs_norm</span><span class="p">,</span> <span class="n">thetas</span><span class="p">,</span> <span class="n">funcnum</span><span class="p">)</span>
<span class="n">w0</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">c0</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>m0</strong><span class="classifier">int</span></dt><dd><p>The number of terms along the meridian.</p>
</dd>
<dt><strong>n0</strong><span class="classifier">int</span></dt><dd><p>The number of terms along the circumference.</p>
</dd>
<dt><strong>zs_norm</strong><span class="classifier">np.ndarray</span></dt><dd><p>The normalized <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/> coordinates (from 0. to 1.) used to compute
the base functions.</p>
</dd>
<dt><strong>thetas</strong><span class="classifier">np.ndarray</span></dt><dd><p>The angles in radians representing the circumferential positions.</p>
</dd>
<dt><strong>funcnum</strong><span class="classifier">int, optional</span></dt><dd><p>The function used for the approximation (see function <a class="reference internal" href="#desicos.conecylDB.fit_data.calc_c0" title="desicos.conecylDB.fit_data.calc_c0"><code class="xref py py-func docutils literal notranslate"><span class="pre">calc_c0()</span></code></a>)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.fit_data.filter_c0">
<code class="sig-prename descclassname">desicos.conecylDB.fit_data.</code><code class="sig-name descname">filter_c0</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m0</span></em>, <em class="sig-param"><span class="n">n0</span></em>, <em class="sig-param"><span class="n">c0</span></em>, <em class="sig-param"><span class="n">filter_m0</span></em>, <em class="sig-param"><span class="n">filter_n0</span></em>, <em class="sig-param"><span class="n">funcnum</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/fit_data.html#filter_c0"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.fit_data.filter_c0" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply filter to the imperfection coefficients <img class="math" src="../../_images/math/52c2234a357e7a6a3d40b3c24090928a8d5c475e.png" alt="\{c_0\}"/></p>
<p>A filter consists on removing some frequencies that are known to be
related to rigid body modes or spurious measurement noise. The frequencies
to be removed should be passed through inputs <code class="docutils literal notranslate"><span class="pre">filter_m0</span></code> and
<code class="docutils literal notranslate"><span class="pre">filter_n0</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>m0</strong><span class="classifier">int</span></dt><dd><p>The number of terms along the meridian.</p>
</dd>
<dt><strong>n0</strong><span class="classifier">int</span></dt><dd><p>The number of terms along the circumference.</p>
</dd>
<dt><strong>c0</strong><span class="classifier">np.ndarray</span></dt><dd><p>The coefficients of the imperfection pattern.</p>
</dd>
<dt><strong>filter_m0</strong><span class="classifier">list</span></dt><dd><p>The values of <code class="docutils literal notranslate"><span class="pre">m0</span></code> that should be filtered.</p>
</dd>
<dt><strong>filter_n0</strong><span class="classifier">list</span></dt><dd><p>The values of <code class="docutils literal notranslate"><span class="pre">n0</span></code> that should be filtered.</p>
</dd>
<dt><strong>funcnum</strong><span class="classifier">int, optional</span></dt><dd><p>The function used for the approximation (see function <a class="reference internal" href="#desicos.conecylDB.fit_data.calc_c0" title="desicos.conecylDB.fit_data.calc_c0"><code class="xref py py-func docutils literal notranslate"><span class="pre">calc_c0()</span></code></a>)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>c0_filtered</strong><span class="classifier">np.ndarray</span></dt><dd><p>The filtered coefficients of the imperfection pattern.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.fit_data.fw0">
<code class="sig-prename descclassname">desicos.conecylDB.fit_data.</code><code class="sig-name descname">fw0</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m0</span></em>, <em class="sig-param"><span class="n">n0</span></em>, <em class="sig-param"><span class="n">c0</span></em>, <em class="sig-param"><span class="n">xs_norm</span></em>, <em class="sig-param"><span class="n">ts</span></em>, <em class="sig-param"><span class="n">funcnum</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/fit_data.html#fw0"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.fit_data.fw0" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the imperfection field <img class="math" src="../../_images/math/73036b31511ada0e09ed38a1a5ad0c9f8a2a5e86.png" alt="w_0"/> for a given input</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>m0</strong><span class="classifier">int</span></dt><dd><p>The number of terms along the meridian.</p>
</dd>
<dt><strong>n0</strong><span class="classifier">int</span></dt><dd><p>The number of terms along the circumference.</p>
</dd>
<dt><strong>c0</strong><span class="classifier">np.ndarray</span></dt><dd><p>The coefficients of the imperfection pattern.</p>
</dd>
<dt><strong>xs_norm</strong><span class="classifier">np.ndarray</span></dt><dd><p>The meridian coordinate (<img class="math" src="../../_images/math/888f7c323ac0341871e867220ae2d76467d74d6e.png" alt="x"/>) normalized to be between <code class="docutils literal notranslate"><span class="pre">0.</span></code> and
<code class="docutils literal notranslate"><span class="pre">1.</span></code>.</p>
</dd>
<dt><strong>ts</strong><span class="classifier">np.ndarray</span></dt><dd><p>The angles in radians representing the circumferential coordinate
(<img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/>).</p>
</dd>
<dt><strong>funcnum</strong><span class="classifier">int, optional</span></dt><dd><p>The function used for the approximation (see function <a class="reference internal" href="#desicos.conecylDB.fit_data.calc_c0" title="desicos.conecylDB.fit_data.calc_c0"><code class="xref py py-func docutils literal notranslate"><span class="pre">calc_c0()</span></code></a>)</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>w0s</strong><span class="classifier">np.ndarray</span></dt><dd><p>An array with the same shape of <code class="docutils literal notranslate"><span class="pre">xs_norm</span></code> containing the calculated
imperfections.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The inputs <code class="docutils literal notranslate"><span class="pre">xs_norm</span></code> and <code class="docutils literal notranslate"><span class="pre">ts</span></code> must be of the same size.</p>
<p>The inputs must satisfy <code class="docutils literal notranslate"><span class="pre">c0.shape[0]</span> <span class="pre">==</span> <span class="pre">size*m0*n0</span></code>, where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">size=2</span></code> if <code class="docutils literal notranslate"><span class="pre">funcnum==1</span> <span class="pre">or</span> <span class="pre">funcnum==2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">size=4</span></code> if <code class="docutils literal notranslate"><span class="pre">funcnum==3</span></code></p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.fit_data.transf_matrix">
<code class="sig-prename descclassname">desicos.conecylDB.fit_data.</code><code class="sig-name descname">transf_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">alphadeg</span></em>, <em class="sig-param"><span class="n">betadeg</span></em>, <em class="sig-param"><span class="n">gammadeg</span></em>, <em class="sig-param"><span class="n">x0</span></em>, <em class="sig-param"><span class="n">y0</span></em>, <em class="sig-param"><span class="n">z0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/fit_data.html#transf_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.fit_data.transf_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the transformation matrix</p>
<p>The transformation matrix <img class="math" src="../../_images/math/7e3bee9b47540642c8ef7e5f41ceb08689c1b901.png" alt="[T]"/> is used to transform a set of points
from one coordinate system to another.</p>
<p>Many routines in the <code class="docutils literal notranslate"><span class="pre">desicos</span></code> require a transformation matrix when
the coordinate system is different than <a class="reference internal" href="../abaqus/index.html#figure-conecyl"><span class="std std-ref">the default one</span></a>. In such cases the angles <img class="math" src="../../_images/math/0435187cfaf1d639f6899f92c15c3ce06cc5552d.png" alt="\alpha, \beta, \gamma"/> and
the translations <img class="math" src="../../_images/math/ba4dc3da1e5992436818cf5da487b5de8f7d4c56.png" alt="\Delta x_0, \Delta y_0, \Delta z_0"/> represent how
the user’s coordinate system differs from the default.</p>
<div class="math">
<p><img src="../../_images/math/8421ff53469390e0fb079a128969fd40905f119b.png" alt="[T] = \begin{bmatrix}
cos(\beta)cos(\gamma) &amp;
sin(\alpha)sin(\beta)cos(\gamma) + cos(\alpha)sin(\gamma) &amp;
sin(\alpha)sin(\gamma) - cos(\alpha)sin(\beta)cos(\gamma) &amp;
\Delta x_0
\\
-cos(\beta)sin(\gamma) &amp;
cos(\alpha)cos(\gamma) - sin(\alpha)sin(\beta)sin(\gamma)&amp;
sin(\alpha)cos(\gamma) + cos(\alpha)sin(\beta)sin(\gamma) &amp;
\Delta y_0
\\
sin(\beta) &amp;
-sin(\alpha)cos(\beta) &amp;
cos(\alpha)cos(\beta) &amp;
\Delta z_0
\\
      \end{bmatrix}"/></p>
</div><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>alphadeg</strong><span class="classifier">float</span></dt><dd><p>Rotation around the x axis, in degrees.</p>
</dd>
<dt><strong>betadeg</strong><span class="classifier">float</span></dt><dd><p>Rotation around the y axis, in degrees.</p>
</dd>
<dt><strong>gammadeg</strong><span class="classifier">float</span></dt><dd><p>Rotation around the z axis, in degrees.</p>
</dd>
<dt><strong>x0</strong><span class="classifier">float</span></dt><dd><p>Translation along the x axis.</p>
</dd>
<dt><strong>y0</strong><span class="classifier">float</span></dt><dd><p>Translation along the y axis.</p>
</dd>
<dt><strong>z0</strong><span class="classifier">float</span></dt><dd><p>Translation along the z axis.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>T</strong><span class="classifier">np.ndarray</span></dt><dd><p>The 3 by 4 transformation matrix.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-desicos.conecylDB.interpolate"></span><div class="section" id="interpolate-desicos-conecyldb-interpolate">
<h2>Interpolate (<a class="reference internal" href="#module-desicos.conecylDB.interpolate" title="desicos.conecylDB.interpolate"><code class="xref py py-mod docutils literal notranslate"><span class="pre">desicos.conecylDB.interpolate</span></code></a>)<a class="headerlink" href="#interpolate-desicos-conecyldb-interpolate" title="Permalink to this headline">¶</a></h2>
<p>This module includes some interpolation utilities that will be used in other
modules.</p>
<dl class="py function">
<dt id="desicos.conecylDB.interpolate.interp">
<code class="sig-prename descclassname">desicos.conecylDB.interpolate.</code><code class="sig-name descname">interp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">xp</span></em>, <em class="sig-param"><span class="n">fp</span></em>, <em class="sig-param"><span class="n">left</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">right</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">period</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/interpolate.html#interp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.interpolate.interp" title="Permalink to this definition">¶</a></dt>
<dd><p>One-dimensional linear interpolation</p>
<p>Returns the one-dimensional piecewise linear interpolant to a function
with given values at discrete data-points.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x</strong><span class="classifier">array_like</span></dt><dd><p>The x-coordinates of the interpolated values.</p>
</dd>
<dt><strong>xp</strong><span class="classifier">1-D sequence of floats</span></dt><dd><p>The x-coordinates of the data points, must be increasing if argument
<code class="docutils literal notranslate"><span class="pre">period</span></code> is not specified. Otherwise, <code class="docutils literal notranslate"><span class="pre">xp</span></code> is internally sorted
after normalizing the periodic boundaries with <code class="docutils literal notranslate"><span class="pre">xp</span> <span class="pre">=</span> <span class="pre">xp</span> <span class="pre">%</span> <span class="pre">period</span></code>.</p>
</dd>
<dt><strong>fp</strong><span class="classifier">1-D sequence of floats</span></dt><dd><p>The y-coordinates of the data points, same length as <code class="docutils literal notranslate"><span class="pre">xp</span></code>.</p>
</dd>
<dt><strong>left</strong><span class="classifier">float, optional</span></dt><dd><p>Value to return for <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">xp[0]</span></code>, default is <code class="docutils literal notranslate"><span class="pre">fp[0]</span></code>.</p>
</dd>
<dt><strong>right</strong><span class="classifier">float, optional</span></dt><dd><p>Value to return for <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">xp[-1]</span></code>, default is <code class="docutils literal notranslate"><span class="pre">fp[-1]</span></code>.</p>
</dd>
<dt><strong>period</strong><span class="classifier">float, optional</span></dt><dd><p>A period for the x-coordinates. This parameter allows the proper
interpolation of angular x-coordinates. Parameters <code class="docutils literal notranslate"><span class="pre">left</span></code> and
<code class="docutils literal notranslate"><span class="pre">right</span></code> are ignored if <code class="docutils literal notranslate"><span class="pre">period</span></code> is specified.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>y</strong><span class="classifier">{float, ndarray}</span></dt><dd><p>The interpolated values, same shape as <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><dl class="simple">
<dt>ValueError</dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">xp</span></code> and <code class="docutils literal notranslate"><span class="pre">fp</span></code> have different length
If <code class="docutils literal notranslate"><span class="pre">xp</span></code> or <code class="docutils literal notranslate"><span class="pre">fp</span></code> are not 1-D sequences
If <code class="docutils literal notranslate"><span class="pre">period==0</span></code></p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Does not check that the x-coordinate sequence <code class="docutils literal notranslate"><span class="pre">xp</span></code> is increasing.
If <code class="docutils literal notranslate"><span class="pre">xp</span></code> is not increasing, the results are nonsense.
A simple check for increasing is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xp</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xp</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fp</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interp</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">xp</span><span class="p">,</span> <span class="n">fp</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interp</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.72</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">],</span> <span class="n">xp</span><span class="p">,</span> <span class="n">fp</span><span class="p">)</span>
<span class="go">array([ 3. ,  3. ,  2.5 ,  0.56,  0. ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">UNDEF</span> <span class="o">=</span> <span class="o">-</span><span class="mf">99.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interp</span><span class="p">(</span><span class="mf">3.14</span><span class="p">,</span> <span class="n">xp</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="n">UNDEF</span><span class="p">)</span>
<span class="go">-99.0</span>
</pre></div>
</div>
<p>Plot an interpolant to the sine function:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xvals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">yinterp</span> <span class="o">=</span> <span class="n">interp</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">)</span>
<span class="go">[&lt;matplotlib.lines.Line2D object at 0x...&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xvals</span><span class="p">,</span> <span class="n">yinterp</span><span class="p">,</span> <span class="s1">&#39;-x&#39;</span><span class="p">)</span>
<span class="go">[&lt;matplotlib.lines.Line2D object at 0x...&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Interpolation with periodic x-coordinates:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">170</span><span class="p">,</span> <span class="o">-</span><span class="mi">185</span><span class="p">,</span> <span class="mi">185</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">365</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xp</span> <span class="o">=</span> <span class="p">[</span><span class="mi">190</span><span class="p">,</span> <span class="o">-</span><span class="mi">190</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="o">-</span><span class="mi">350</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fp</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">xp</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">360</span><span class="p">)</span>
<span class="go">array([7.5, 5., 8.75, 6.25, 3., 3.25, 3.5, 3.75])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.interpolate.interp_theta_z_imp">
<code class="sig-prename descclassname">desicos.conecylDB.interpolate.</code><code class="sig-name descname">interp_theta_z_imp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">mesh</span></em>, <em class="sig-param"><span class="n">alphadeg</span></em>, <em class="sig-param"><span class="n">H_measured</span></em>, <em class="sig-param"><span class="n">H_model</span></em>, <em class="sig-param"><span class="n">R_bottom</span></em>, <em class="sig-param"><span class="n">stretch_H</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">z_offset_bot</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rotatedeg</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">num_sub</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">ncp</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">power_parameter</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">ignore_bot_h</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ignore_top_h</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">T</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/interpolate.html#interp_theta_z_imp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.interpolate.interp_theta_z_imp" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolates a data set in the <img class="math" src="../../_images/math/b2a656c2e745c49b0bbafed677e263311b4ef2ce.png" alt="\theta, z, imp"/> format</p>
<p>This function uses the inverse-weighted algorithm (<a class="reference internal" href="#desicos.conecylDB.interpolate.inv_weighted" title="desicos.conecylDB.interpolate.inv_weighted"><code class="xref py py-func docutils literal notranslate"><span class="pre">inv_weighted()</span></code></a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">str or numpy.ndarray, shape (N, 3)</span></dt><dd><p>The data or an array containing the imperfection file in the <img class="math" src="../../_images/math/027722420d6d5f11ba001cc71eb81052c9e93b3f.png" alt="(\theta,
Z, imp)"/> format.</p>
</dd>
<dt><strong>mesh</strong><span class="classifier">numpy.ndarray, shape (M, 3)</span></dt><dd><p>The mesh coordinates <img class="math" src="../../_images/math/7bc9b1d09f06174302e9375ccd7d6bf2f26b5fc4.png" alt="(x, y, z)"/> where the values will be interpolated
to.</p>
</dd>
<dt><strong>alphadeg</strong><span class="classifier">float</span></dt><dd><p>The cone semi-vertex angle in degrees.</p>
</dd>
<dt><strong>H_measured</strong><span class="classifier">float</span></dt><dd><p>The total height of the measured test specimen, including eventual
resin rings at the edges.</p>
</dd>
<dt><strong>H_model</strong><span class="classifier">float</span></dt><dd><p>The total height of the new model, including eventual resin rings at
the edges.</p>
</dd>
<dt><strong>R_bottom</strong><span class="classifier">float</span></dt><dd><p>The radius of the model taken at the bottom edge.</p>
</dd>
<dt><strong>stretch_H</strong><span class="classifier">bool, optional</span></dt><dd><p>Tells if the height of the measured points, which is usually smaller
than the height of the test specimen, should be stretched to fill
the whole test specimen. If not, the points will be placed in the
middle or using the offset given by <code class="docutils literal notranslate"><span class="pre">z_offset_bot</span></code> and the
area not covered by the measured points will be interpolated
using the closest available points (the imperfection
pattern will look like there was an extrusion close to the edges).</p>
</dd>
<dt><strong>z_offset_bot</strong><span class="classifier">float, optional</span></dt><dd><p>The offset that should be used from the bottom of the measured points
to the bottom of the test specimen.</p>
</dd>
<dt><strong>rotatedeg</strong><span class="classifier">float, optional</span></dt><dd><p>Rotation angle in degrees telling how much the imperfection pattern
should be rotated about the <img class="math" src="../../_images/math/cd5e7e15383e8582969c6a82e4e784bee1c7d1b7.png" alt="X_3"/> (or <img class="math" src="../../_images/math/95f028ab2b20b895fa12d986e0d9f40f7b6e52d3.png" alt="Z"/>) axis.</p>
</dd>
<dt><strong>num_sub</strong><span class="classifier">int, optional</span></dt><dd><p>The number of sub-sets used during the interpolation. The points
are divided in sub-sets to increase the algorithm’s efficiency.</p>
</dd>
<dt><strong>ncp</strong><span class="classifier">int, optional</span></dt><dd><p>Number of closest points used in the inverse-weighted interpolation.</p>
</dd>
<dt><strong>power_parameter</strong><span class="classifier">float, optional</span></dt><dd><p>Power of inverse weighted interpolation function.</p>
</dd>
<dt><strong>ignore_bot_h</strong><span class="classifier">None or float, optional</span></dt><dd><p>Nodes close to the bottom edge are ignored according to this
meridional distance.</p>
</dd>
<dt><strong>ignore_top_h</strong><span class="classifier">None or float, optional</span></dt><dd><p>Nodes close to the top edge are ignored according to this meridional
distance.</p>
</dd>
<dt><strong>T</strong><span class="classifier">None or np.ndarray, optional</span></dt><dd><p>A transformation matrix (cf. <a class="reference internal" href="#desicos.conecylDB.fit_data.transf_matrix" title="desicos.conecylDB.fit_data.transf_matrix"><code class="xref py py-func docutils literal notranslate"><span class="pre">transf_matrix()</span></code></a>) required when the
mesh is not in the <a class="reference internal" href="../abaqus/index.html#figure-conecyl"><span class="std std-ref">default coordinate system</span></a>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>ans</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>An array with M elements containing the interpolated values.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.interpolate.inv_weighted">
<code class="sig-prename descclassname">desicos.conecylDB.interpolate.</code><code class="sig-name descname">inv_weighted</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">mesh</span></em>, <em class="sig-param"><span class="n">num_sub</span></em>, <em class="sig-param"><span class="n">col</span></em>, <em class="sig-param"><span class="n">ncp</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">power_parameter</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/interpolate.html#inv_weighted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.interpolate.inv_weighted" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolates the values taken at one group of points into
another using an inverse-weighted algorithm</p>
<p>In the inverse-weighted algorithm a number of <img class="math" src="../../_images/math/cc3563c01833ed65727af548f93b42f5a4a5c5b5.png" alt="n_{CP}"/> measured points
of the input parameter <code class="docutils literal notranslate"><span class="pre">data</span></code> that are closest to a given node in
the input parameter <code class="docutils literal notranslate"><span class="pre">mesh</span></code> are found and the imperfection value of
this node (represented by the normal displacement <img class="math" src="../../_images/math/4ca38ed8e8500346ea96c411fa386d02d57e7413.png" alt="{w_0}_{node}"/>) is
calculated as follows:</p>
<div class="math">
<p><img src="../../_images/math/b0f66d7174efecae9ea534e1c3eb8f803333d37e.png" alt="{w_0}_{node} = \frac{\sum_{i}^{n_{CP}}{{w_0}_i\frac{1}{w_i}}}
                    {\sum_{i}^{n_{CP}}{\frac{1}{w_i}}}"/></p>
</div><p>where <img class="math" src="../../_images/math/00ab1d47834bf57ac5b018a21ace10aae5798cfd.png" alt="w_i"/> is the inverse weight of each measured point, calculated as:</p>
<div class="math">
<p><img src="../../_images/math/5e50aecff37781625989030efdf90639a9da5896.png" alt="w_i = \left[(x_{node}-x_i)^2+(y_{node}-y_i)^2+(z_{node}-z_i)^2
      \right]^p"/></p>
</div><p>with <img class="math" src="../../_images/math/141bbefb74014fc5e43499901bf78607ae335583.png" alt="p"/> being a power parameter that when increased will increase the
relative influence of a closest point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">numpy.ndarray, shape (N, ndim+1)</span></dt><dd><p>The data or an array containing the imperfection file. The values
to be interpolated must be in the last column.</p>
</dd>
<dt><strong>mesh</strong><span class="classifier">numpy.ndarray, shape (M, ndim)</span></dt><dd><p>The new coordinates where the values will be interpolated to.</p>
</dd>
<dt><strong>num_sub</strong><span class="classifier">int</span></dt><dd><p>The number of sub-sets used during the interpolation. The points
are divided in sub-sets to increase the algorithm’s efficiency.</p>
</dd>
<dt><strong>col</strong><span class="classifier">int</span></dt><dd><p>The index of the column to be used in order to divide the data
in sub-sets. Note that the first column index is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd>
<dt><strong>ncp</strong><span class="classifier">int, optional</span></dt><dd><p>Number of closest points used in the inverse-weighted interpolation.</p>
</dd>
<dt><strong>power_parameter</strong><span class="classifier">float, optional</span></dt><dd><p>Power of inverse weighted interpolation function.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>ans</strong><span class="classifier">numpy.ndarray</span></dt><dd><p>A 1-D array with the interpolated values. The size of this array
is <code class="docutils literal notranslate"><span class="pre">mesh.shape[0]</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-desicos.conecylDB.read_write"></span><div class="section" id="read-write-desicos-conecyldb-read-write">
<h2>Read/Write (<a class="reference internal" href="#module-desicos.conecylDB.read_write" title="desicos.conecylDB.read_write"><code class="xref py py-mod docutils literal notranslate"><span class="pre">desicos.conecylDB.read_write</span></code></a>)<a class="headerlink" href="#read-write-desicos-conecyldb-read-write" title="Permalink to this headline">¶</a></h2>
<p>This module includes functions to read and write imperfection files.</p>
<dl class="py function">
<dt id="desicos.conecylDB.read_write.read_theta_z_imp">
<code class="sig-prename descclassname">desicos.conecylDB.read_write.</code><code class="sig-name descname">read_theta_z_imp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">H_measured</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stretch_H</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">z_offset_bot</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/read_write.html#read_theta_z_imp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.read_write.read_theta_z_imp" title="Permalink to this definition">¶</a></dt>
<dd><p>Read an imperfection file in the format <img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/>, <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/>, imperfection.</p>
<p>Where the angles <img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/> are given in radians.</p>
<p>Example of input file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">theta1</span> <span class="n">z1</span> <span class="n">imp1</span>
<span class="n">theta2</span> <span class="n">z2</span> <span class="n">imp2</span>
<span class="o">...</span>
<span class="n">thetan</span> <span class="n">zn</span> <span class="n">impn</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>path</strong><span class="classifier">str or np.ndarray</span></dt><dd><p>The path to the imperfection file, or a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>, with
three columns.</p>
</dd>
<dt><strong>H_measured</strong><span class="classifier">float, optional</span></dt><dd><p>The total height of the measured test specimen, including eventual
resin rings at the edges.</p>
</dd>
<dt><strong>stretch_H</strong><span class="classifier">bool, optional</span></dt><dd><p>Tells if the height of the measured points, which is usually smaller
than the height of the test specimen, should be stretched to fill
the whole test specimen. If not, the points will be placed in the
middle or using the offset given by <code class="docutils literal notranslate"><span class="pre">z_offset_bot</span></code> and the
area not covered by the measured points will be interpolated
using the closest available points (the imperfection
pattern will look like there was an extrusion close to the edges).</p>
</dd>
<dt><strong>z_offset_bot</strong><span class="classifier">float, optional</span></dt><dd><p>The offset that should be used from the bottom of the measured points
to the bottom of the test specimen.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>mps</strong><span class="classifier">np.ndarray</span></dt><dd><p>A 2-D array with <img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/>, <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/>, <img class="math" src="../../_images/math/685c8fe591bb97bf6275e937a1c698ac6daec5a5.png" alt="value"/> in the first, second
and third columns, respectively.</p>
</dd>
<dt><strong>offset_mps</strong><span class="classifier">np.ndarray</span></dt><dd><p>A 2-D array similar to <code class="docutils literal notranslate"><span class="pre">mps</span></code> but offset according to place the
measured data according to the inputs given.</p>
</dd>
<dt><strong>norm_mps</strong><span class="classifier">np.ndarray</span></dt><dd><p>A 2-D array similar to <code class="docutils literal notranslate"><span class="pre">mps</span></code> but normalized in <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/> by the height.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.read_write.read_xyz">
<code class="sig-prename descclassname">desicos.conecylDB.read_write.</code><code class="sig-name descname">read_xyz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">alphadeg_measured</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">R_best_fit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">H_measured</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stretch_H</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">z_offset_bot</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">r_TOL</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/read_write.html#read_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.read_write.read_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Read an imperfection file in the format <img class="math" src="../../_images/math/888f7c323ac0341871e867220ae2d76467d74d6e.png" alt="x"/>, <img class="math" src="../../_images/math/1b5e577d6216dca3af7d87aa122a0b9b360d6cb3.png" alt="y"/>, <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/>.</p>
<p>Example of input file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x1</span> <span class="n">y1</span> <span class="n">z1</span>
<span class="n">x2</span> <span class="n">y2</span> <span class="n">z2</span>
<span class="o">...</span>
<span class="n">xn</span> <span class="n">yn</span> <span class="n">zn</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>path</strong><span class="classifier">str or np.ndarray</span></dt><dd><p>The path to the imperfection file, or a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>, with
three columns.</p>
</dd>
<dt><strong>alphadeg_measured</strong><span class="classifier">float, optional</span></dt><dd><p>The semi-vertex angle of the measured sample.</p>
</dd>
<dt><strong>R_best_fit</strong><span class="classifier">float, optional</span></dt><dd><p>Best fit radius obtained with functions <a class="reference internal" href="#desicos.conecylDB.fit_data.best_fit_cylinder" title="desicos.conecylDB.fit_data.best_fit_cylinder"><code class="xref py py-func docutils literal notranslate"><span class="pre">best_fit_cylinder()</span></code></a>
or <code class="xref py py-func docutils literal notranslate"><span class="pre">best_fit_cone()</span></code>.</p>
</dd>
<dt><strong>H_measured</strong><span class="classifier">float, optional</span></dt><dd><p>The total height of the measured test specimen, including eventual
resin rings at the edges.</p>
</dd>
<dt><strong>stretch_H</strong><span class="classifier">bool, optional</span></dt><dd><p>Tells if the height of the measured points, which is usually smaller
than the height of the test specimen, should be stretched to fill
the whole test specimen. If not, the points will be placed in the
middle or using the offset given by <code class="docutils literal notranslate"><span class="pre">z_offset_bot</span></code> and the
area not covered by the measured points will be interpolated
using the closest available points (the imperfection
pattern will look like there was an extrusion close to the edges).</p>
</dd>
<dt><strong>z_offset_bot</strong><span class="classifier">float, optional</span></dt><dd><p>The offset that should be used from the bottom of the measured points
to the bottom of the test specimen.</p>
</dd>
<dt><strong>r_TOL</strong><span class="classifier">float, optional</span></dt><dd><p>The tolerance used to ignore points farer than <code class="docutils literal notranslate"><span class="pre">r_TOL*R_best_fit</span></code>,
given in percent.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>mps</strong><span class="classifier">np.ndarray</span></dt><dd><p>A 2-D array with <img class="math" src="../../_images/math/888f7c323ac0341871e867220ae2d76467d74d6e.png" alt="x"/>, <img class="math" src="../../_images/math/1b5e577d6216dca3af7d87aa122a0b9b360d6cb3.png" alt="y"/>, <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/> in the first, second
and third columns, respectively.</p>
</dd>
<dt><strong>offset_mps</strong><span class="classifier">np.ndarray</span></dt><dd><p>A 2-D array similar to <code class="docutils literal notranslate"><span class="pre">mps</span></code> but with the z coordinates offset
according to the inputs given.</p>
</dd>
<dt><strong>norm_mps</strong><span class="classifier">np.ndarray</span></dt><dd><p>A 2-D array similar to <code class="docutils literal notranslate"><span class="pre">mps</span></code> but normalized in <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/> by the height
and in <img class="math" src="../../_images/math/888f7c323ac0341871e867220ae2d76467d74d6e.png" alt="x"/> and <img class="math" src="../../_images/math/1b5e577d6216dca3af7d87aa122a0b9b360d6cb3.png" alt="y"/> by the radius.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.read_write.xyz2thetazimp">
<code class="sig-prename descclassname">desicos.conecylDB.read_write.</code><code class="sig-name descname">xyz2thetazimp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">alphadeg_measured</span></em>, <em class="sig-param"><span class="n">H_measured</span></em>, <em class="sig-param"><span class="n">R_expected</span><span class="o">=</span><span class="default_value">10.0</span></em>, <em class="sig-param"><span class="n">use_best_fit</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">sample_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">best_fit_output</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">errorRtol</span><span class="o">=</span><span class="default_value">1e-09</span></em>, <em class="sig-param"><span class="n">stretch_H</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">z_offset_bot</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">r_TOL</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">clip_bottom</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">clip_top</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">save</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fmt</span><span class="o">=</span><span class="default_value">'%1.6f'</span></em>, <em class="sig-param"><span class="n">rotatedeg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/read_write.html#xyz2thetazimp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.read_write.xyz2thetazimp" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms an imperfection file from the format “<img class="math" src="../../_images/math/888f7c323ac0341871e867220ae2d76467d74d6e.png" alt="x"/> <img class="math" src="../../_images/math/1b5e577d6216dca3af7d87aa122a0b9b360d6cb3.png" alt="y"/> <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/>”
to the format “<img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/> <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/> <img class="math" src="../../_images/math/de3645446a888e17a70c677bce72bcbdfa20a886.png" alt="imp"/>”.</p>
<p>The input file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x1</span> <span class="n">y1</span> <span class="n">z1</span>
<span class="n">x2</span> <span class="n">y2</span> <span class="n">z2</span>
<span class="o">...</span>
<span class="n">xn</span> <span class="n">yn</span> <span class="n">zn</span>
</pre></div>
</div>
<p>Is transformed to a file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">theta1</span> <span class="n">z1</span> <span class="n">imp1</span>
<span class="n">theta2</span> <span class="n">z2</span> <span class="n">imp2</span>
<span class="o">...</span>
<span class="n">thetan</span> <span class="n">zn</span> <span class="n">impn</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>path</strong><span class="classifier">str</span></dt><dd><p>The path to the imperfection file.</p>
</dd>
<dt><strong>alphadeg_measured</strong><span class="classifier">float</span></dt><dd><p>The semi-vertex angle of the measured sample (it is <code class="docutils literal notranslate"><span class="pre">0.</span></code> for a
cylinder).</p>
</dd>
<dt><strong>H_measured</strong><span class="classifier">float</span></dt><dd><p>The total height of the measured test specimen, including eventual
resin rings at the edges.</p>
</dd>
<dt><strong>R_expected</strong><span class="classifier">float, optional</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">use_best_fit==True</span></code> this will be used as a first estimative that
can reduce the number of iterations up to convergence of the best fit
algorithms. If <code class="docutils literal notranslate"><span class="pre">use_best_fit==False</span></code> this will be considered the
<code class="docutils literal notranslate"><span class="pre">R_best_fit</span></code>.</p>
</dd>
<dt><strong>use_best_fit</strong><span class="classifier">bool, optional</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> it overwrites the values for: <code class="docutils literal notranslate"><span class="pre">R_expected</span></code> (for
cylinders and cones) and <code class="docutils literal notranslate"><span class="pre">z_offset_bot</span></code> (for cones), which are
automatically determined with functions <a class="reference internal" href="#desicos.conecylDB.fit_data.best_fit_cylinder" title="desicos.conecylDB.fit_data.best_fit_cylinder"><code class="xref py py-func docutils literal notranslate"><span class="pre">best_fit_cylinder()</span></code></a> and
<a class="reference internal" href="#desicos.conecylDB.fit_data.best_fit_cone" title="desicos.conecylDB.fit_data.best_fit_cone"><code class="xref py py-func docutils literal notranslate"><span class="pre">best_fit_cone()</span></code></a>.</p>
</dd>
<dt><strong>best_fit_output</strong><span class="classifier">bool, optional</span></dt><dd><p>If the output from the best fit routines should be also returned. In
case <code class="docutils literal notranslate"><span class="pre">True</span></code> the output of this function will be a tuple with
<code class="docutils literal notranslate"><span class="pre">(mps,</span> <span class="pre">out)</span></code>. For a description of <code class="docutils literal notranslate"><span class="pre">out</span></code> see
<a class="reference internal" href="#desicos.conecylDB.fit_data.best_fit_cylinder" title="desicos.conecylDB.fit_data.best_fit_cylinder"><code class="xref py py-func docutils literal notranslate"><span class="pre">best_fit_cylinder()</span></code></a>.</p>
</dd>
<dt><strong>errorRtol</strong><span class="classifier">float, optional</span></dt><dd><p>The error tolerance for the best-fit radius to stop the iterations.</p>
</dd>
<dt><strong>sample_size</strong><span class="classifier">int, optional</span></dt><dd><p>If the input file containing the measured data is too large it may
become convenient to use only a sample of it in order to calculate
the best fit.</p>
</dd>
<dt><strong>z_offset_bot</strong><span class="classifier">float, optional</span></dt><dd><p>The offset that should be used from the bottom of the measured points
to the bottom of the test specimen.</p>
</dd>
<dt><strong>r_TOL</strong><span class="classifier">float, optional</span></dt><dd><p>The tolerance used to ignore points farer than <code class="docutils literal notranslate"><span class="pre">r_TOL*R_best_fit</span></code>,
given in percent.</p>
</dd>
<dt><strong>clip_bottom</strong><span class="classifier">float, optional</span></dt><dd><p>How much of the measured points close to the bottom edge should be
cut off, convenient to remove spurious measured data. Example: if
the minimum <code class="docutils literal notranslate"><span class="pre">z</span></code> coordinate of the measured points is <code class="docutils literal notranslate"><span class="pre">25.4</span></code>
and <code class="docutils literal notranslate"><span class="pre">clip_bottom=10.</span></code>, all points with <code class="docutils literal notranslate"><span class="pre">z&lt;=35.4</span></code> will be
ignored.</p>
</dd>
<dt><strong>clip_top</strong><span class="classifier">float, optional</span></dt><dd><p>Same as <code class="docutils literal notranslate"><span class="pre">clip_bottom</span></code>, but applicable to the points close to the
top edge.</p>
</dd>
<dt><strong>save</strong><span class="classifier">bool, optional</span></dt><dd><p>If the returned array <code class="docutils literal notranslate"><span class="pre">mps</span></code> should also be saved to a <code class="docutils literal notranslate"><span class="pre">.txt</span></code> file.</p>
</dd>
<dt><strong>fmt</strong><span class="classifier">str or sequence of strs, optional</span></dt><dd><p>See <code class="docutils literal notranslate"><span class="pre">np.savetxt()</span></code> documentation for more details.</p>
</dd>
<dt><strong>rotatedeg</strong><span class="classifier">float or None, optional</span></dt><dd><p>Rotation angle in degrees telling how much the imperfection pattern
should be rotated about the <img class="math" src="../../_images/math/cd5e7e15383e8582969c6a82e4e784bee1c7d1b7.png" alt="X_3"/> (or <img class="math" src="../../_images/math/95f028ab2b20b895fa12d986e0d9f40f7b6e52d3.png" alt="Z"/>) axis.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>mps</strong><span class="classifier">np.ndarray</span></dt><dd><p>A 2-D array with <img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/>, <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/>, <img class="math" src="../../_images/math/de3645446a888e17a70c677bce72bcbdfa20a886.png" alt="imp"/> in the first, second
and third columns, respectively.</p>
</dd>
<dt><strong>mps, out</strong><span class="classifier">np.ndarray, dict</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">best_fit_output==True</span></code> it returns <code class="docutils literal notranslate"><span class="pre">(mps,</span> <span class="pre">out)</span></code> as described
above.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="desicos.conecylDB.read_write.xyzthick2thetazthick">
<code class="sig-prename descclassname">desicos.conecylDB.read_write.</code><code class="sig-name descname">xyzthick2thetazthick</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">alphadeg_measured</span></em>, <em class="sig-param"><span class="n">H_measured</span></em>, <em class="sig-param"><span class="n">R_expected</span><span class="o">=</span><span class="default_value">10.0</span></em>, <em class="sig-param"><span class="n">use_best_fit</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">sample_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stretch_H</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">z_offset_bot</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">r_TOL</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">save</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fmt</span><span class="o">=</span><span class="default_value">'%1.6f'</span></em>, <em class="sig-param"><span class="n">rotatedeg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/desicos/conecylDB/read_write.html#xyzthick2thetazthick"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#desicos.conecylDB.read_write.xyzthick2thetazthick" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms an imperfection file from the format: “<img class="math" src="../../_images/math/888f7c323ac0341871e867220ae2d76467d74d6e.png" alt="x"/> <img class="math" src="../../_images/math/1b5e577d6216dca3af7d87aa122a0b9b360d6cb3.png" alt="y"/> <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/> <img class="math" src="../../_images/math/5ef9b397d462be73cc3b8ef287890b74de568bbe.png" alt="thick"/>”
to the format “<img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/> <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/> <img class="math" src="../../_images/math/5ef9b397d462be73cc3b8ef287890b74de568bbe.png" alt="thick"/>”.</p>
<p>The input file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x1</span> <span class="n">y1</span> <span class="n">z1</span> <span class="n">thick1</span>
<span class="n">x2</span> <span class="n">y2</span> <span class="n">z2</span> <span class="n">thick2</span>
<span class="o">...</span>
<span class="n">xn</span> <span class="n">yn</span> <span class="n">zn</span> <span class="n">thickn</span>
</pre></div>
</div>
<p>Is transformed in a file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">theta1</span> <span class="n">z1</span> <span class="n">thick1</span>
<span class="n">theta2</span> <span class="n">z2</span> <span class="n">thick2</span>
<span class="o">...</span>
<span class="n">thetan</span> <span class="n">zn</span> <span class="n">thickn</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>path</strong><span class="classifier">str</span></dt><dd><p>The path to the imperfection file.</p>
</dd>
<dt><strong>alphadeg_measured</strong><span class="classifier">float</span></dt><dd><p>The semi-vertex angle of the measured sample (it is <code class="docutils literal notranslate"><span class="pre">0.</span></code> for a
cylinder).</p>
</dd>
<dt><strong>H_measured</strong><span class="classifier">float</span></dt><dd><p>The total height of the measured test specimen, including eventual
resin rings at the edges.</p>
</dd>
<dt><strong>R_expected</strong><span class="classifier">float, optional</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">use_best_fit</span> <span class="pre">is</span> <span class="pre">True</span></code> this will be used as a first estimative that
can reduce the number of iterations up to convergence of the best fit
algorithms. If <code class="docutils literal notranslate"><span class="pre">use_best_fit</span> <span class="pre">is</span> <span class="pre">False</span></code> this will be considered the
<code class="docutils literal notranslate"><span class="pre">R_best_fit</span></code>.</p>
</dd>
<dt><strong>use_best_fit</strong><span class="classifier">bool, optional</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> it overwrites the values for: <code class="docutils literal notranslate"><span class="pre">R_expected</span></code> (for
cylinders and cones) and <code class="docutils literal notranslate"><span class="pre">z_offset_bot</span></code> (for cones), which are
automatically determined with functions <a class="reference internal" href="#desicos.conecylDB.fit_data.best_fit_cylinder" title="desicos.conecylDB.fit_data.best_fit_cylinder"><code class="xref py py-func docutils literal notranslate"><span class="pre">best_fit_cylinder()</span></code></a> and
<a class="reference internal" href="#desicos.conecylDB.fit_data.best_fit_cone" title="desicos.conecylDB.fit_data.best_fit_cone"><code class="xref py py-func docutils literal notranslate"><span class="pre">best_fit_cone()</span></code></a>.</p>
</dd>
<dt><strong>sample_size</strong><span class="classifier">int, optional</span></dt><dd><p>If the input file containing the measured data is too large it may
become convenient to use only a sample of it in order to calculate
the best fit.</p>
</dd>
<dt><strong>z_offset_bot</strong><span class="classifier">float, optional</span></dt><dd><p>The offset that should be used from the bottom of the measured points
to the bottom of the test specimen.</p>
</dd>
<dt><strong>r_TOL</strong><span class="classifier">float, optional</span></dt><dd><p>The tolerance used to ignore points farer than <code class="docutils literal notranslate"><span class="pre">r_TOL*R_best_fit</span></code>,
given in percent.</p>
</dd>
<dt><strong>save</strong><span class="classifier">bool, optional</span></dt><dd><p>If the returned array <code class="docutils literal notranslate"><span class="pre">mps</span></code> should also be saved to a <code class="docutils literal notranslate"><span class="pre">.txt</span></code> file.</p>
</dd>
<dt><strong>fmt</strong><span class="classifier">str or sequence of strs, optional</span></dt><dd><p>See <code class="docutils literal notranslate"><span class="pre">np.savetxt()</span></code> documentation for more details.</p>
</dd>
<dt><strong>rotatedeg</strong><span class="classifier">float or None, optional</span></dt><dd><p>Rotation angle in degrees telling how much the imperfection pattern
should be rotated about the <img class="math" src="../../_images/math/cd5e7e15383e8582969c6a82e4e784bee1c7d1b7.png" alt="X_3"/> (or <img class="math" src="../../_images/math/95f028ab2b20b895fa12d986e0d9f40f7b6e52d3.png" alt="Z"/>) axis.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>mps</strong><span class="classifier">np.ndarray</span></dt><dd><p>A 2-D array with <img class="math" src="../../_images/math/8a87f04e7d7cca18343c084cceca5237fae62491.png" alt="\theta"/>, <img class="math" src="../../_images/math/8d051150f8669295ecdbe92367941012175a824d.png" alt="z"/>, <img class="math" src="../../_images/math/de3645446a888e17a70c677bce72bcbdfa20a886.png" alt="imp"/> in the first, second
and third columns, respectively.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/desicos.png" alt="Logo"/>
    
  </a>
</p>










<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2012-2020 Desicos Improved Software Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>